"use strict";(self.webpackChunkauthApp=self.webpackChunkauthApp||[]).push([[409],{3409:($,v,s)=>{s.r(v),s.d(v,{LibreriaModule:()=>z});var y=s(9808),u=s(3476),M=s(5226),c=s.n(M),e=s(1223),T=s(2340),Z=s(4004),A=s(520);let g=(()=>{class r{constructor(t){this.http=t,this._libroUrl=T.N.librosUrl}getLibros(){return this.http.get(`${this._libroUrl}`).pipe((0,Z.U)(t=>Object.values(t.Libros)))}getPorId(t){return this.http.get(`${this._libroUrl}/${t}`)}getPorNombre(t){return this.http.get(`${this._libroUrl}/name/${t}`).pipe((0,Z.U)(o=>o.Libros))}deleteLibro(t){return this.http.delete(`${this._libroUrl}/delete/${t}`)}updateLibro(t,o){return this.http.put(`${this._libroUrl}/update/${t}`,o)}createLibro(t){return this.http.post(`${this._libroUrl}/create`,t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(A.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),m=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-navbar"]],decls:18,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","/libreria",1,"navbar-brand"],["xmlns","http://www.w3.org/2000/svg","width","44","height","44","viewBox","0 0 24 24","stroke-width","1.5","stroke","#000000","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-book"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"],["d","M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"],["x1","3","y1","6","x2","3","y2","19"],["x1","12","y1","6","x2","12","y2","19"],["x1","21","y1","6","x2","21","y2","19"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLink","/libreria",1,"nav-link"],["routerLink","/libreria/subir-libro",1,"nav-link"]],template:function(t,o){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5)(6,"path",6)(7,"line",7)(8,"line",8)(9,"line",9),e.qZA()(),e.kcU(),e.TgZ(10,"button",10),e._UZ(11,"span",11),e.qZA(),e.TgZ(12,"div",12)(13,"div",13)(14,"a",14),e._uU(15,"Inicio"),e.qZA(),e.TgZ(16,"a",15),e._uU(17,"Subir libro"),e.qZA()()()()())},directives:[u.yS],styles:[""]}),r})();var w=s(7579),x=s(727);class L extends x.w0{constructor(n,t){super()}schedule(n,t=0){return this}}const p={setInterval(r,n,...t){const{delegate:o}=p;return(null==o?void 0:o.setInterval)?o.setInterval(r,n,...t):setInterval(r,n,...t)},clearInterval(r){const{delegate:n}=p;return((null==n?void 0:n.clearInterval)||clearInterval)(r)},delegate:void 0};var U=s(8737);const _={now:()=>(_.delegate||Date).now(),delegate:void 0};class b{constructor(n,t=b.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,o){return new this.schedulerActionCtor(this,n).schedule(o,t)}}b.now=_.now;const k=new class J extends b{constructor(n,t=b.now){super(n,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let o;this._active=!0;do{if(o=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,o){for(;n=t.shift();)n.unsubscribe();throw o}}}(class S extends L{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){if(this.closed)return this;this.state=n;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(n,t,o=0){return p.setInterval(n.flush.bind(n,this),o)}recycleAsyncId(n,t,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return t;p.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(n,t);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,o=!1;try{this.work(n)}catch(l){o=!0,i=l||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,U.P)(o,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}});var q=s(4482),I=s(5403),a=s(2382);let F=(()=>{class r{constructor(){this.debouncer=new w.x,this.termino="",this.onDebounce=new e.vpe}ngOnInit(){this.debouncer.pipe(function N(r,n=k){return(0,q.e)((t,o)=>{let i=null,l=null,h=null;const f=()=>{if(i){i.unsubscribe(),i=null;const d=l;l=null,o.next(d)}};function Q(){const d=h+r,C=n.now();if(C<d)return i=this.schedule(void 0,d-C),void o.add(i);f()}t.subscribe((0,I.x)(o,d=>{l=d,h=n.now(),i||(i=n.schedule(Q,r),o.add(i))},()=>{f(),o.complete()},void 0,()=>{l=i=null}))})}(300)).subscribe(t=>{this.onDebounce.emit(t)})}teclapresionada(){this.debouncer.next(this.termino)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-browser"]],outputs:{onDebounce:"onDebounce"},decls:6,vars:1,consts:[[1,"navbar"],[1,"container-fluid"],["role","search",1,"d-flex"],["autocomplete","off","type","search","placeholder","Buscar...","aria-label","Search","name","buscador",1,"form-control","me-2",3,"ngModel","input","ngModelChange"],["type","submit",1,"btn","btn-outline-light"]],template:function(t,o){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"form",2)(3,"input",3),e.NdJ("input",function(){return o.teclapresionada()})("ngModelChange",function(l){return o.termino=l}),e.qZA(),e.TgZ(4,"button",4),e._uU(5,"Buscar"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("ngModel",o.termino))},directives:[a._Y,a.JL,a.F,a.Fj,a.JJ,a.On],styles:[""]}),r})();const B=function(r){return["/libreria/modificar",r]};function O(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12),e._uU(3),e.qZA(),e.TgZ(4,"div",13)(5,"h5",14),e._uU(6),e.qZA(),e.TgZ(7,"p",15),e._uU(8),e.qZA(),e.TgZ(9,"p",15),e._uU(10),e.qZA(),e.TgZ(11,"div",16)(12,"a",17),e._uU(13,"Modificar libro"),e.qZA(),e.TgZ(14,"a",18),e.NdJ("click",function(){const i=e.CHM(t),l=i.index,h=i.$implicit;return e.oxw().deleteLibro(l,h._id)}),e._uU(15,"Eliminar"),e.qZA()()(),e.TgZ(16,"div",19),e._uU(17),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(3),e.hij(" Author: ",t.author," "),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hij("Editorial: ",t.editorial,""),e.xp6(2),e.hij("Palabras Clave: ",t.keywords,""),e.xp6(2),e.Q6J("routerLink",e.VKq(6,B,t._id)),e.xp6(5),e.hij(" Fecha de publicaci\xf3n: ",t.year," ")}}const j=[{path:"",children:[{path:"inicio",component:(()=>{class r{constructor(t){this.libroSv=t,this.termino="",this.libros=[]}ngOnInit(){this.libroSv.getLibros().subscribe(t=>{this.libros=t,console.log(this.libros)})}deleteLibro(t,o){this.libroSv.deleteLibro(o).subscribe(i=>{c().fire({title:"Est\xe1s seguro que quieres eliminar el libro?",showCancelButton:!0,confirmButtonText:"Eliminar"}).then(l=>{l.isConfirmed&&(c().fire("Eliminado!","","success"),this.libros.splice(t),console.log(i))})})}sugerencia(t){this.termino=t,this.termino.length>0?(this.libros=[],this.libroSv.getPorNombre(this.termino).subscribe(o=>{this.libros=o,console.log(o)})):this.libroSv.getLibros().subscribe(o=>{this.libros=o})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-inicio"]],decls:14,vars:1,consts:[[1,"container","sombra"],[1,"row"],[1,"row","bg"],[1,"buscador"],[1,"text-light"],[3,"onDebounce"],[1,"row","bg-dark"],[1,"my-3"],[1,"text-center","text-white"],["class","col my-3",4,"ngFor","ngForOf"],[1,"col","my-3"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"d-flex","justify-content-center","gap-3"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",3,"click"],[1,"card-footer","text-muted"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-navbar"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Buscar un libro"),e.qZA(),e.TgZ(7,"app-browser",5),e.NdJ("onDebounce",function(l){return o.sugerencia(l)}),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"h5",8),e._uU(11,"Libros disponibles"),e.qZA()()(),e.TgZ(12,"div",1),e.YNc(13,O,18,8,"div",9),e.qZA()()),2&t&&(e.xp6(13),e.Q6J("ngForOf",o.libros))},directives:[m,F,y.sg,u.yS],styles:[".sombra[_ngcontent-%COMP%]{box-shadow:1px 18px 48px 24px #0000003b}.bg[_ngcontent-%COMP%]{position:relative;height:20rem;background-image:url(https://enciclopediaonline.com/wp-content/uploads/2018/01/slide-enciclopdia.jpg);background-size:cover;background-repeat:no-repeat}.buscador[_ngcontent-%COMP%]{position:absolute;background-color:#000000b3;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),r})()},{path:"subir-libro",component:(()=>{class r{constructor(t,o){this.libroSV=t,this.router=o,this.libro={name:"",author:"",year:"",keywords:"",editorial:""}}ngOnInit(){}subir(){c().fire({title:"Est\xe1 todo listo?",showCancelButton:!0,confirmButtonText:"Subir libro"}).then(t=>{t.isConfirmed&&(c().fire("El libro se subi\xf3 correctamente!","","success"),this.libroSV.createLibro(this.libro).subscribe(o=>{this.router.navigateByUrl("/libreria"),console.log(o)}))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g),e.Y36(u.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-subir-libro"]],decls:32,vars:5,consts:[[1,"container","sombra"],[1,"row"],[1,"row","my-3"],[1,"text-center"],[1,"row","justify-content-center","py-5"],[1,"col-6"],["autocomplete","off",3,"submit"],[1,"mb-3"],["for","namebook",1,"form-label"],["type","text","id","namebook","name","name",1,"form-control",3,"ngModel","ngModelChange"],["for","author",1,"form-label"],["type","text","id","author","name","author",1,"form-control",3,"ngModel","ngModelChange"],["for","year",1,"form-label"],["type","text","id","year","name","year",1,"form-control",3,"ngModel","ngModelChange"],["for","editorial",1,"form-label"],["type","text","id","editorial","name","editorial",1,"form-control",3,"ngModel","ngModelChange"],["for","keywords",1,"form-label"],["type","text","id","keywords","name","keywords",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-navbar"),e.qZA(),e.TgZ(3,"div",2)(4,"h3",3),e._uU(5,"Subir libro"),e.qZA()(),e._UZ(6,"hr"),e.TgZ(7,"div",4)(8,"div",5)(9,"form",6),e.NdJ("submit",function(){return o.subir()}),e.TgZ(10,"div",7)(11,"label",8),e._uU(12,"Nombre del libro"),e.qZA(),e.TgZ(13,"input",9),e.NdJ("ngModelChange",function(l){return o.libro.name=l}),e.qZA()(),e.TgZ(14,"div",7)(15,"label",10),e._uU(16,"Autor(es)"),e.qZA(),e.TgZ(17,"input",11),e.NdJ("ngModelChange",function(l){return o.libro.author=l}),e.qZA()(),e.TgZ(18,"div",7)(19,"label",12),e._uU(20,"A\xf1o"),e.qZA(),e.TgZ(21,"input",13),e.NdJ("ngModelChange",function(l){return o.libro.year=l}),e.qZA()(),e.TgZ(22,"div",7)(23,"label",14),e._uU(24,"Editorial"),e.qZA(),e.TgZ(25,"input",15),e.NdJ("ngModelChange",function(l){return o.libro.editorial=l}),e.qZA()(),e.TgZ(26,"div",7)(27,"label",16),e._uU(28,"Palabras clave"),e.qZA(),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(l){return o.libro.keywords=l}),e.qZA()(),e.TgZ(30,"button",18),e._uU(31,"Subir"),e.qZA()()()()()),2&t&&(e.xp6(13),e.Q6J("ngModel",o.libro.name),e.xp6(4),e.Q6J("ngModel",o.libro.author),e.xp6(4),e.Q6J("ngModel",o.libro.year),e.xp6(4),e.Q6J("ngModel",o.libro.editorial),e.xp6(4),e.Q6J("ngModel",o.libro.keywords))},directives:[m,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On],styles:[".sombra[_ngcontent-%COMP%]{box-shadow:1px 18px 48px 24px #0000003b}"]}),r})()},{path:"modificar/:id",component:(()=>{class r{constructor(t,o,i){this.ruta=t,this.libroSV=o,this.router=i,this.id="",this.libro={_id:"",name:"",author:"",year:"",keywords:"",editorial:""}}ngOnInit(){this.ruta.params.subscribe(({id:t})=>{this.id=t,this.libroSV.getPorId(t).subscribe(o=>{this.libro=o.Libro,console.log(this.libro)})})}actualizar(){this.libroSV.updateLibro(this.id,this.libro).subscribe(t=>{c().fire({title:"Actualizar libro?",showCancelButton:!0,confirmButtonText:"Actualizar"}).then(o=>{o.isConfirmed&&(c().fire("Actualizado!","","success"),this.router.navigateByUrl("/libreria"))})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.gz),e.Y36(g),e.Y36(u.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-modificar-libro"]],decls:32,vars:5,consts:[[1,"container","sombra"],[1,"row"],[1,"row","my-3"],[1,"text-center"],[1,"row","justify-content-center","py-5"],[1,"col-6"],["autocomplete","off",3,"submit"],[1,"mb-3"],["for","namebook",1,"form-label"],["type","text","id","namebook","name","name",1,"form-control",3,"ngModel","ngModelChange"],["for","author",1,"form-label"],["type","text","id","author","name","author",1,"form-control",3,"ngModel","ngModelChange"],["for","year",1,"form-label"],["type","text","id","year","name","year",1,"form-control",3,"ngModel","ngModelChange"],["for","editorial",1,"form-label"],["type","text","id","editorial","name","editorial",1,"form-control",3,"ngModel","ngModelChange"],["for","keywords",1,"form-label"],["type","text","id","keywords","name","keywords",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-navbar"),e.qZA(),e.TgZ(3,"div",2)(4,"h3",3),e._uU(5,"Modificar libro"),e.qZA()(),e._UZ(6,"hr"),e.TgZ(7,"div",4)(8,"div",5)(9,"form",6),e.NdJ("submit",function(){return o.actualizar()}),e.TgZ(10,"div",7)(11,"label",8),e._uU(12,"Nombre del libro"),e.qZA(),e.TgZ(13,"input",9),e.NdJ("ngModelChange",function(l){return o.libro.name=l}),e.qZA()(),e.TgZ(14,"div",7)(15,"label",10),e._uU(16,"Autor(es)"),e.qZA(),e.TgZ(17,"input",11),e.NdJ("ngModelChange",function(l){return o.libro.author=l}),e.qZA()(),e.TgZ(18,"div",7)(19,"label",12),e._uU(20,"A\xf1o"),e.qZA(),e.TgZ(21,"input",13),e.NdJ("ngModelChange",function(l){return o.libro.year=l}),e.qZA()(),e.TgZ(22,"div",7)(23,"label",14),e._uU(24,"Editorial"),e.qZA(),e.TgZ(25,"input",15),e.NdJ("ngModelChange",function(l){return o.libro.editorial=l}),e.qZA()(),e.TgZ(26,"div",7)(27,"label",16),e._uU(28,"Palabras clave"),e.qZA(),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(l){return o.libro.keywords=l}),e.qZA()(),e.TgZ(30,"button",18),e._uU(31,"Actualizar"),e.qZA()()()()()),2&t&&(e.xp6(13),e.Q6J("ngModel",o.libro.name),e.xp6(4),e.Q6J("ngModel",o.libro.author),e.xp6(4),e.Q6J("ngModel",o.libro.year),e.xp6(4),e.Q6J("ngModel",o.libro.editorial),e.xp6(4),e.Q6J("ngModel",o.libro.keywords))},directives:[m,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On],styles:[".sombra[_ngcontent-%COMP%]{box-shadow:1px 18px 48px 24px #0000003b}"]}),r})()},{path:"**",redirectTo:"inicio"}]}];let P=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.Bz.forChild(j)],u.Bz]}),r})(),z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[y.ez,P,a.u5]]}),r})()}}]);